<!DOCTYPE html>
<!-- saved from url=(0016)http://localhost -->
<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>http-parsing</title>
    <style>
        body{
            margin: 0;
        }
        #content-info{
            width: auto;
            margin: 0 auto;
            text-align: center;
        }
        #author-info{
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        #title{
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            padding-top: 10px;
            margin-bottom: 2px;
            font-size: 34px;
            color: #505050;
        }
        .text{
            white-space:nowrap;
            text-overflow: ellipsis;
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 2px;
            font-size: 20px;
            color: #8c8c8c;
        }
        #navBar{
            position: fixed;
            right:0;
            bottom: 0;
            background-color: #f0f3f4;
            overflow-y: auto;
            text-align: center;
        }
        #svg-container{
            width: 100%;
            min-width: 0;
            margin: 0 10px;
        }
        #nav-thumbs{
            padding: 0 5px;
        }
        .nav-thumb{
            position: relative;
            margin: 10px auto;
        }
        .nav-thumb >p{
            text-align: center;
            font-size: 12px;
            margin: 4px 0 0 0;
        }
        .nav-thumb >div{
            position: relative;
            display: inline-block;
            border: 1px solid #c6cfd5;
        }
        .nav-thumb img{
            display: block;
        }
        .nav-thumb span{
            pointer-events: none;
        }
        #main-content{
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #d0cfd8;
            display: flex;
            height: auto;
            flex-flow: row wrap;
            text-align:center;
        }
        #svg-container >svg{
            display: block;
            margin:10px auto;
            margin-bottom: 0;
        }
        #copyright{
            bottom: 0;
            left: 50%;
            margin: 5px auto;
            font-size: 16px;
            color: #515151;
        }
        #copyright >a{
            text-decoration: none;
            color: #77C;
        }
        .number{
            position: absolute;
            top:0;
            left:0;
            border-top:22px solid #76838f;
            border-right: 22px solid transparent;
        }
        .pagenum{
            font-size: 12px;
            color: #fff;
            position: absolute;
            top: -23px;
            left: 2px;
        }
        #navBar::-webkit-scrollbar{
            width: 8px;
            background-color: #f5f5f5;
        }
        #navBar::-webkit-scrollbar-track{
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            border-radius: 8px;
            background-color: #fff;
        }
        #navBar::-webkit-scrollbar-thumb{
            border-radius: 8px;
            -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,.3);
            background-color: #6b6b70;
        }
        #navBar::-webkit-scrollbar-thumb:hover{
            background-color: #4a4a4f;
        }
        .nav-thumb >div:hover{
            box-shadow:1px 1px 4px rgba(0,0,0,.4);
        }
        .selected .number{
            border-color: #08a1ef transparent;
        }
</style>
  </head>
  <body>
    <div id="main-area">
      <div id="content-info"></div>
      <div id="main-content">
        <div id="svg-container"><svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1241 1336" height="1336" id="page1" xmlns:ev="http://www.w3.org/2001/xml-events" preserveAspectRadio="xMinYMin meet" width="1241"><defs/><rect stroke="#808080" fill="#ffffff" height="1336" x="0" y="0" width="1241"/><g transform="translate(342.63,38.75)" id="shape1"><path stroke="#101843" fill="#b0b4df" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="17.5" y="27.5">等待新数据</tspan></text></g><g transform="translate(343.38,159.76)" id="shape2"><path stroke="#101843" fill="#e9f8f5" d="M100.0,44.0L100.0,.0L.0,.0L.0,44.0L100.0,44.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="17.5" y="27.5">插入缓冲区</tspan></text></g><g transform="translate(392.63,82.75)" id="shape3"><path stroke="#191919" d="M.0,.0L.0,71.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,71.0L.0,77.0L-3.0,71.0L3.0,71.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(309.06,285.19)" id="shape4"><path stroke="#101843" fill="#e9f8f5" d="M168.6,42.9L168.6,.0L.0,.0L.0,42.9L168.6,42.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="12.8" y="27.0">从缓存数据中查找 "\r\n"</tspan></text></g><g transform="translate(393.38,328.09)" id="shape5"><path stroke="#191919" d="M.0,.0L.0,84.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,84.0L.0,90.0L-3.0,84.0L3.0,84.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(393.38,203.76)" id="shape6"><path stroke="#191919" d="M.0,.0L.0,76.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,76.0L.0,82.0L-3.0,76.0L3.0,76.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(332.45,419.30)" id="shape7"><path stroke="#101843" fill="#b0bffe" d="M60.9,56.4L121.9,28.2L60.9,.0L.0,28.2L60.9,56.4z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="34.9" y="33.7">是否找到</tspan></text></g><g transform="translate(607.00,429.08)" id="shape8"><path stroke="#101843" fill="#e9f8f5" d="M144.0,36.9L144.0,.0L.0,.0L.0,36.9L144.0,36.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="20.0" y="23.9">将第一行数据取出</tspan></text></g><g transform="translate(454.30,447.52)" id="shape9"><path stroke="#191919" d="M.0,.0L146.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M146.0,-3.0L152.0,.0L146.0,3.0L146.0,-3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="56.9" y="-9.5" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="56.9" y="5.5">true</tspan></text></g><g transform="translate(393.38,475.74)" id="shape10"><path stroke="#191919" d="M.0,.0L.0,86.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,86.0L.0,92.0L-3.0,86.0L3.0,86.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-13.0" y="30.6" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-13.0" y="45.6">false</tspan></text></g><g transform="translate(255.19,567.75)" id="shape11"><path stroke="#101843" fill="#b0bffe" d="M138.2,81.9L276.4,40.9L138.2,.0L.0,40.9L138.2,81.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="57.2" y="46.4">缓存数据大小是否超过1024</tspan></text></g><g transform="translate(255.19,608.68)" id="shape12"><path stroke="#191919" d="M.0,.0L-28.0,.0L-28.0,-548.0L81.0,-548.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M81.0,-551.0L87.0,-548.0L81.0,-545.0L81.0,-551.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-41.0" y="-81.7" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-41.0" y="-66.7">false</tspan></text></g><g transform="translate(393.38,649.62)" id="shape13"><path stroke="#191919" d="M.0,.0L.0,91.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,91.0L.0,97.0L-3.0,91.0L3.0,91.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-11.5" y="48.1" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-11.5" y="63.1">true</tspan></text></g><g transform="translate(302.88,747.19)" id="shape14"><path stroke="#101843" fill="#b0bffe" d="M90.5,75.2L181.0,37.6L90.5,.0L.0,37.6L90.5,75.2z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="35.5" y="43.1">state == 读请求行</tspan></text></g><g transform="translate(393.38,822.38)" id="shape15"><path stroke="#191919" d="M.0,.0L.0,104.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,104.0L.0,110.0L-3.0,104.0L3.0,104.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-13.0" y="34.6" width="28.0"/><rect fill="#ffffff" height="19.0" x="-68.5" y="53.6" width="139.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-13.0" y="49.6">false</tspan><tspan x="-68.5" y="68.6">( state == 读请求头行 )</tspan></text></g><g transform="translate(302.88,784.78)" id="shape16"><path stroke="#191919" d="M.0,.0L-134.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-134.0,3.0L-140.0,.0L-134.0,-3.0L-134.0,3.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(39.00,764.23)" id="shape17"><path stroke="#101843" fill="#e9f8f5" d="M123.5,39.0L123.5,.0L.0,.0L.0,39.0L123.5,39.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="22.7" y="25.0">清空数据缓存</tspan></text></g><g transform="translate(331.63,932.52)" id="shape18"><path stroke="#101843" fill="#e9f8f5" d="M123.5,39.0L123.5,.0L.0,.0L.0,39.0L123.5,39.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="22.8" y="25.0">清空解析缓存</tspan></text></g><g transform="translate(39.00,932.52)" id="shape19"><path stroke="#101843" fill="#e9f8f5" d="M123.5,39.0L123.5,.0L.0,.0L.0,39.0L123.5,39.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="11.8" y="25.0">state = 读请求行</tspan></text></g><g transform="translate(331.63,952.02)" id="shape20"><path stroke="#191919" d="M.0,.0L-163.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-163.0,3.0L-169.0,.0L-163.0,-3.0L-163.0,3.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(100.75,764.23)" id="shape21"><path stroke="#191919" d="M.0,.0L.0,-704.0L236.0,-704.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M236.0,-707.0L242.0,-704.0L236.0,-701.0L236.0,-707.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(100.75,932.52)" id="shape22"><path stroke="#191919" d="M.0,.0L.0,-123.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-123.0L.0,-129.0L3.0,-123.0L-3.0,-123.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(588.50,612.00)" id="shape23"><path stroke="#101843" fill="#b0bffe" d="M90.5,75.2L181.0,37.6L90.5,.0L.0,37.6L90.5,75.2z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="35.5" y="43.1">state == 读请求行</tspan></text></g><g transform="translate(899.00,631.15)" id="shape24"><path stroke="#101843" fill="#e9f8f5" d="M144.0,36.9L144.0,.0L.0,.0L.0,36.9L144.0,36.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="39.5" y="24.0">解析请求行</tspan></text></g><g transform="translate(769.50,649.59)" id="shape25"><path stroke="#191919" d="M.0,.0L59.5,.0C59.5,-3.3,62.2,-6.0,65.5,-6.0C68.8,-6.0,71.5,-3.3,71.5,.0L124.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M124.0,-3.0L130.0,.0L124.0,3.0L124.0,-3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="21.4" y="-9.5" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="21.4" y="5.5">true</tspan></text></g><g transform="translate(1083.63,510.68)" id="shape26"><path stroke="#101843" fill="#b0bffe" d="M56.4,52.6L112.7,26.3L56.4,.0L.0,26.3L56.4,52.6z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="30.4" y="31.8">格式正确</tspan></text></g><g transform="translate(1043.00,649.59)" id="shape27"><path stroke="#191919" d="M.0,.0L95.0,.0L95.0,-79.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M92.0,-79.0L95.0,-85.0L98.0,-79.0L92.0,-79.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(1078.25,287.14)" id="shape28"><path stroke="#101843" fill="#e9f8f5" d="M123.5,39.0L123.5,.0L.0,.0L.0,39.0L123.5,39.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="22.8" y="25.0">清空数据缓存</tspan></text></g><g transform="translate(1140.00,287.14)" id="shape29"><path stroke="#191919" d="M.0,.0L.0,-227.0L-692.0,-227.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-692.0,-224.0L-698.0,-227.0L-692.0,-230.0L-692.0,-224.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(884.00,393.00)" id="shape30"><path stroke="#101843" fill="#e9f8f5" d="M144.0,42.9L144.0,.0L.0,.0L.0,42.9L144.0,42.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="15.5" y="26.9">state = 读请求头行</tspan></text></g><g transform="translate(763.00,279.52)" id="shape31"><path stroke="#101843" fill="#b0bffe" d="M72.0,54.3L144.0,27.1L72.0,.0L.0,27.1L72.0,54.3z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="33.0" y="32.6">缓冲区有数据</tspan></text></g><g transform="translate(835.00,279.52)" id="shape32"><path stroke="#191919" d="M.0,.0L.0,-219.0L-387.0,-219.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-387.0,-216.0L-393.0,-219.0L-387.0,-222.0L-387.0,-216.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-13.0" y="-95.0" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-13.0" y="-80.0">false</tspan></text></g><g transform="translate(763.00,306.64)" id="shape33"><path stroke="#191919" d="M.0,.0L-280.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-280.0,3.0L-286.0,.0L-280.0,-3.0L-280.0,3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-147.4" y="-9.5" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-147.4" y="5.5">true</tspan></text></g><g transform="translate(1083.63,537.00)" id="shape34"><path stroke="#191919" d="M.0,.0L-73.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-73.0,3.0L-79.0,.0L-73.0,-3.0L-73.0,3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-48.6" y="-9.5" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-48.6" y="5.5">true</tspan></text></g><g transform="translate(1140.00,510.68)" id="shape35"><path stroke="#191919" d="M.0,.0L.0,-178.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-178.0L.0,-184.0L3.0,-178.0L-3.0,-178.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-13.0" y="-69.6" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-13.0" y="-54.6">false</tspan></text></g><g transform="translate(956.00,393.00)" id="shape36"><path stroke="#191919" d="M.0,.0L.0,-87.0L-43.0,-87.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-43.0,-84.0L-49.0,-87.0L-43.0,-90.0L-43.0,-84.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(679.00,687.19)" id="shape37"><path stroke="#191919" d="M.0,.0L.0,116.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,116.0L.0,122.0L-3.0,116.0L3.0,116.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-13.0" y="41.1" width="28.0"/><rect fill="#ffffff" height="19.0" x="-68.5" y="60.1" width="139.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-13.0" y="56.1">false</tspan><tspan x="-68.5" y="75.1">( state == 读请求头行 )</tspan></text></g><g transform="translate(608.00,809.00)" id="shape38"><path stroke="#101843" fill="#e9f8f5" d="M144.0,36.9L144.0,.0L.0,.0L.0,36.9L144.0,36.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="33.0" y="24.0">解析请求头行</tspan></text></g><g transform="translate(623.63,925.70)" id="shape39"><path stroke="#101843" fill="#b0bffe" d="M56.4,52.6L112.8,26.3L56.4,.0L.0,26.3L56.4,52.6z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="30.4" y="31.8">格式正确</tspan></text></g><g transform="translate(680.00,845.89)" id="shape40"><path stroke="#191919" d="M.0,.0L.0,74.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,74.0L.0,80.0L-3.0,74.0L3.0,74.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(623.63,952.02)" id="shape41"><path stroke="#191919" d="M.0,.0L-161.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-161.0,3.0L-167.0,.0L-161.0,-3.0L-161.0,3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-67.4" y="-9.5" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-67.4" y="5.5">false</tspan></text></g><g transform="translate(680.00,978.33)" id="shape42"><path stroke="#191919" d="M.0,.0L.0,251.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,251.0L.0,257.0L-3.0,251.0L3.0,251.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-11.5" y="80.2" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-11.5" y="95.2">true</tspan></text></g><g transform="translate(907.00,515.55)" id="shape43"><path stroke="#101843" fill="#e9f8f5" d="M98.0,42.9L98.0,.0L.0,.0L.0,42.9L98.0,42.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="23.0" y="26.9">缓存解析</tspan></text></g><g transform="translate(956.00,515.55)" id="shape44"><path stroke="#191919" d="M.0,.0L.0,-74.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-74.0L.0,-80.0L3.0,-74.0L-3.0,-74.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(786.00,1085.11)" id="shape45"><path stroke="#101843" fill="#e9f8f5" d="M98.0,42.9L98.0,.0L.0,.0L.0,42.9L98.0,42.9z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="23.0" y="26.9">缓存解析</tspan></text></g><g transform="translate(590.81,1234.77)" id="shape46"><path stroke="#101843" fill="#b0bffe" d="M88.2,62.2L176.4,31.1L88.2,.0L.0,31.1L88.2,62.2z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="38.2" y="36.6">是否到结尾 (\r\n)</tspan></text></g><g transform="translate(679.00,465.96)" id="shape47"><path stroke="#191919" d="M.0,.0L.0,141.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M3.0,141.0L.0,147.0L-3.0,141.0L3.0,141.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(276.37,1055.28)" id="shape48"><path stroke="#101843" fill="#e9f8f5" d="M234.0,102.5L234.0,.0L.0,.0L.0,102.5L234.0,102.5z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="22.0" y="28.5">从剩余缓存数据中截取"content-</tspan><tspan x="19.0" y="47.5">length"字节数据作为"body"缓存 </tspan><tspan x="18.0" y="66.5">( 剩余缓存数据可能小于"content-</tspan><tspan x="12.5" y="85.5">length"，之后由服务程序继续读取 )</tspan></text></g><g transform="translate(321.38,1238.74)" id="shape49"><path stroke="#101843" fill="#b0bffe" d="M72.0,54.3L144.0,27.1L72.0,.0L.0,27.1L72.0,54.3z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="33.0" y="32.6">缓冲区有数据</tspan></text></g><g transform="translate(590.81,1265.87)" id="shape50"><path stroke="#191919" d="M.0,.0L-119.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-119.0,3.0L-125.0,.0L-119.0,-3.0L-119.0,3.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-73.3" y="-9.5" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-73.3" y="5.5">true</tspan></text></g><g transform="translate(393.38,1238.74)" id="shape51"><path stroke="#191919" d="M.0,.0L.0,-75.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-75.0L.0,-81.0L3.0,-75.0L-3.0,-75.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-11.5" y="-45.6" width="25.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-11.5" y="-30.6">true</tspan></text></g><g transform="translate(39.00,1087.05)" id="shape52"><path stroke="#101843" fill="#ffe2b3" d="M123.5,39.0L123.5,.0L.0,.0L.0,39.0L123.5,39.0z" stroke-width="1" fill-rule="nonzero"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="16.3" y="25.0">将解析结果返回</tspan></text></g><g transform="translate(276.37,1106.55)" id="shape53"><path stroke="#191919" d="M.0,.0L-108.0,.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-108.0,3.0L-114.0,.0L-108.0,-3.0L-108.0,3.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(100.75,1087.05)" id="shape54"><path stroke="#191919" d="M.0,.0L.0,-110.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-110.0L.0,-116.0L3.0,-110.0L-3.0,-110.0" stroke-width="1" stroke-linecap="round"/></g><g transform="translate(321.38,1265.87)" id="shape55"><path stroke="#191919" d="M.0,.0L-221.0,.0L-221.0,-133.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-224.0,-133.0L-221.0,-139.0L-218.0,-133.0L-224.0,-133.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="-78.3" y="-9.5" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="-78.3" y="5.5">false</tspan></text></g><g transform="translate(767.19,1265.87)" id="shape56"><path stroke="#191919" d="M.0,.0L67.0,.0L67.0,-130.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M64.0,-130.0L67.0,-136.0L70.0,-130.0L64.0,-130.0" stroke-width="1" stroke-linecap="round"/><rect fill="#ffffff" height="19.0" x="54.0" y="-46.6" width="28.0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑;font-size:10.00pt"><tspan x="54.0" y="-31.6">false</tspan></text></g><g transform="translate(835.00,1085.11)" id="shape57"><path stroke="#191919" d="M.0,.0L.0,-746.0" fill="none" stroke-width="1"/><path stroke="#191919" fill="#191919" d="M-3.0,-746.0L.0,-752.0L3.0,-746.0L-3.0,-746.0" stroke-width="1" stroke-linecap="round"/></g></svg></div>
      </div>
      <div id="navBar">
        <div id="nav-thumbs"/>
      </div>
    </div>
    <script>
        const svgs=document.getElementById("svg-container").children;
        const UA=window.navigator.userAgent;
        const ua=(UA.indexOf('rv:11')+UA.indexOf('Firefox'))>=0;
        const svgcount=document.getElementById('svg-container').childElementCount;
        var styleArr=[];
        var heightArr=[];
        var navBar=document.getElementById('navBar');
        var conInfo=document.getElementById('content-info');
        for(var i=0;i<svgcount;i++){
            styleArr[i] = {width:svgs[i].getAttribute('width'),height:svgs[i].getAttribute('height')}
        }
        window.onresize=function () {
            renavstyle();
            resvgstyle();
        };
        window.onscroll=renavstyle;
        window.onload=function () {
            renavstyle();
            var sideWidth=navBar.offsetWidth;
            document.getElementById('content-info').style.marginRight=sideWidth+'px';
            document.getElementById('main-content').style.marginRight=sideWidth+'px';
            resvgstyle();
            doscroll();
        };
        function recontainstyle() {
            var topHeight=conInfo.clientHeight;
            var svgHeight=0;
            for(var i=0;i<svgcount;i++){
                heightArr[i]=svgs[i].getBoundingClientRect().height+10;
                svgHeight+=svgs[i].clientHeight ||svgs[i].getBoundingClientRect().height;
            }
            var fullHeight=svgHeight+Number(topHeight);
            if(fullHeight<window.innerHeight){
            document.getElementById('main-content').style.position='absolute';
            document.getElementById('main-content').style.top=topHeight+'px';
        }else{
            document.getElementById('main-content').style.position='';
        }
        }
        function resvgstyle() {
            var sideWidth=navBar.offsetWidth+20;
            for(var i=0;i<svgcount;i++){
                var oriWidth = styleArr[i].width;
                var oriHeight = styleArr[i].height;
                var percent = oriHeight / oriWidth;
                var innerWidth=document.body.offsetWidth-sideWidth;
                if (innerWidth <= oriWidth) {
                    svgs[i].removeAttribute('width');
                    svgs[i].removeAttribute('height');
                    if (ua) {
                        svgs[i].setAttribute('height',innerWidth*percent);
                    }
                }else {
                    svgs[i].setAttribute('width', oriWidth);
                    svgs[i].setAttribute('height', oriHeight);
                }
            }
            recontainstyle();
        }
        function renavstyle() {
            var topHeight=conInfo.clientHeight;
            var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;
            if(scrollTop>topHeight){
                document.getElementById('navBar').style.top=0+'px';
            }else{
                document.getElementById('navBar').style.top=topHeight-scrollTop+'px';
            }
            doscroll();
        }
        function doscroll() {
            var topHeight=conInfo.clientHeight;
            var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;
            for(var i=0;i<svgcount;i++){
                var sum=0;
                for(var j=0;j<=i;j++){
                    sum+=heightArr[j];
                }
                if(scrollTop+window.innerHeight/2-topHeight-sum<0){
                    var sub=Number(i)+1;
                    if(document.querySelector('#nav-thumbs .selected')){
                        document.querySelector('#nav-thumbs .selected').classList.remove('selected');
                    }
                    if(document.querySelector('.nav-thumb:nth-of-type('+sub+')')){
                        document.querySelector('.nav-thumb:nth-of-type('+sub+')').classList.add('selected');
                    }
                    break;
                }
            }
        }
        var navs=document.querySelectorAll('.nav-thumb');
        for(i=0;i<navs.length;i++){
            navs[i].children[0].onclick=function () {
                document.querySelector('#nav-thumbs .selected').classList.remove('selected');
                this.parentNode.classList.add('selected');
            }
        }
</script>
  </body>
</html>
